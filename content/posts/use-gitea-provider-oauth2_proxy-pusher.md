---
title: "Use Gitea as a Auth Provider for oauth2_proxy"
date: 2020-02-17T18:50:04-04:00
draft: false
tags: [gitea,oauth2_proxy]
---

To use Gitea as a provider with the [oauth2_proxy](https://github.com/pusher/oauth2_proxy/) use this config:

<b>`proxy.cfg`</b>

```
authenticated_emails_file = "./emails.txt"
redirect_url = "https://<< host running opauth2_proxy >>/oauth2/callback"
cookie_secret = "<< cookie secret"
provider = "github"

provider_display_name = "Gitea"

client_id = "<< client_id as generated by Gitea >>"
client_secret = "<< client_secret as generated by Gitea >>"

login_url="https://<< your gitea host >>/login/oauth/authorize"
redeem_url="https://<< your gitea host >>/login/oauth/access_token"
validate_url="https://<< your gitea host >>/api/v1"

upstreams = [
  "http://<< upstream host >>:<< port >>"
]
```

and <b>`emails.txt`</b> contains a list of emails that you allow access to, like this:

```
user1@domain.com
user2@domain.com
```

And then run:

`./oauth2_proxy -config=proxy.cfg`
